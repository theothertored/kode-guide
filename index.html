<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A guide to Kode basics</title>

    <link rel="stylesheet" href="css/index.css?v=0.1.7" />

    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#101010" />
    <meta name="msapplication-TileColor" content="#101010" />
    <meta name="theme-color" content="#101010" />

    <meta name="description" content="An introduction to writing formulas for Kustom apps, mainly KLWP and KWGT." />

    <!-- open graph for embeds on social media etc. -->
    <meta property="og:title" content="Kode Guide" />
    <meta property="og:description" content="An introduction to writing formulas for Kustom apps, mainly KLWP and KWGT." />
    <meta property="og:url" content="https://theothertored.github.io/kode-guide" />
    <meta property="og:image" content="https://theothertored.github.io/kode-guide/img/og-img.png" />
    <meta property="og:type" content="article" />
    <meta property="og:article:author" content="Tored" />

</head>

<body>

    <div id="toc" class="toc">

        <button type="button" class="toc-fab" title="Expand/Collapse the table of contents">
            <div class="top"></div>
            <div class="mid"></div>
            <div class="bot"></div>
        </button>

        <header>Table of contents</header>

        <main></main>

        <footer>

            <div class="theme-switcher">
                <label class="sec">Theme</label>
                <div class="buttons">
                    <label class="radio dark" title="Use dark theme">
                        <input type="radio" name="theme" value="dark" />
                        <span>Dark</span>
                    </label>
                    <label class="radio" title="Select automatically based on system theme">
                        <input type="radio" name="theme" value="system" />
                        <span>System</span>
                    </label>
                    <label class="radio light" title="Use light theme">
                        <input type="radio" name="theme" value="light" />
                        <span>Light</span>
                    </label>
                </div>
            </div>

        </footer>

    </div>

    <div class="toc-scrim"></div>

    <main class="guide">

        <h1>
            <span class="nowrap">A guide to</span>
            <span class="nowrap">Kode basics</span>
            <div class="small">(by Tored)</div>
        </h1>
        <!-- 
        <div class="theme-switcher">

            <label>What theme would you like to read this guide in?</label>

            <div class="buttons">
                <label class="radio dark" title="Use dark theme">
                    <input type="radio" name="theme2" value="dark" />
                    <span>Dark</span>
                </label>
                <label class="radio" title="Select automatically based on system theme">
                    <input type="radio" name="theme2" value="system" />
                    <span>System</span>
                </label>
                <label class="radio light" title="Use light theme">
                    <input type="radio" name="theme2" value="light" />
                    <span>Light</span>
                </label>
            </div>

        </div> -->

        <h2 id="introduction">Introduction</h2>

        <p>
            What even is Kode? If you've used Kustom apps before, you probably are familiar with the formula editor window.
            Everything you write in the Formula Editor field is Kode.
        </p>

        <div class="image-container">
            <img src="img/intro-screenshot.png" alt="The formula editor window in KLWP." />
            <label>The formula editor window in KLWP.</label>
        </div>

        <p>
            By default, what you write in the formula editor is displayed as-is (plain text).
            However, anything you put between dollar signs <span class="nowrap">(<code>$</code>)</span> will be evaluated.
        </p>

        <p>
            Evaluation means that Kustom will take what you wrote, interpret it as a set of commands telling it what to do,
            and then produce a result (output) that will then be displayed (printed) instead of the entire text between dollar signs.
        </p>


        <h3 id="guide-meta">Important notes regarding this guide</h3>

        <p>
            A quick note for the very start - experimenting and testing stuff for yourself is highly encouraged.
            If you encounter something you don't get, try doing it in the editor and seeing how it works in practice.
        </p>

        <p>
            If you want to test the examples for yourself:
        </p>

        <ul>
            <li>
                You can <strong>double-tap/double-click any example box</strong> to copy its contents to clipboard,
            </li>
            <li>
                For readability, I won't use dollar signs where there's no need to combine Kode and normal text.
                Don't forget to <strong>wrap anything you want evaluated in dollar signs <span class="nowrap">(<code>$</code>)</span></strong>.
            </li>
        </ul>

        <p>
            There is a light/dark theme switch available in the sidebar. By default, the guide uses your system's theme.
        </p>

        <p>
            If you'd like to refer someone to a section of this guide:
        </p>

        <ul>
            <li>Each section title is also a link to that section,</li>
            <li>
                <strong>Long press/right click</strong> the section title and then use "copy link address" to get a <strong>link that will open the guide on that section</strong>.
            </li>
        </ul>

        <p id="sw-caching-available" class="no-display">
            Because your browser supports service workers, this page will be available even if you visit it while offline.
        </p>

        <p id="pwa-install-prompt" class="no-display">
            This guide is also a PWA that can be installed like an app on your device. You can install it from your browser's menu, or by click the button below:
        </p>

        <p id="pwa-install-button" class="no-display text-center">
            <button type="button" class="btn">Install as an app</button>
        </p>

        <p>
            With all that out of the way, let's talk about how Kustom transforms your Kode text into a result value.
        </p>

        <p>
            Have fun!
        </p>

        <h2 id="values-and-operators">Values and operators</h2>

        <h3 id="numbers-and-math">Numbers and math</h3>

        <p>
            Let's start with introducing basic Kode syntax elements with an example:
        </p>

        <div class="snippet first">
            <label class="ex-no"></label>
            <code><span class="hl hl-1">1</span> <span class="hl hl-2">+</span> <span class="hl hl-1">2</span></code>
        </div>

        <p>
            This entire example is a mathematical expression, consisting of two <span class="hl hl-1">values</span> and one
            <span class="hl hl-2">operator</span>.
            We can write longer expressions by adding more <span class="hl hl-1">numbers</span> and <span class="hl hl-2">operators</span>:
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>
                <span class="hl hl-1">6</span>
                <span class="hl hl-2">+</span>
                <span class="hl hl-1">5</span>
                <span class="hl hl-2">-</span>
                <span class="hl hl-1">4</span>
                <span class="hl hl-2">*</span>
                <span class="hl hl-1">3</span>
                <span class="hl hl-2">/</span>
                <span class="hl hl-1">2</span>
                <span class="hl hl-2">^</span>
                <span class="hl hl-1">1</span>
            </code>
        </div>

        <p>
            The table below shows all mathematical operators available in Kustom:
        </p>

        <div class="table-container">
            <table id="math-symbol-table">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Name</th>
                        <th>Example</th>
                        <th>Output</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>+</code></td>
                        <td>Addition</td>
                        <td><code>3 + 2</code></td>
                        <td><code>5</code></td>
                    </tr>
                    <tr>
                        <td><code>-</code></td>
                        <td>Subtraction</td>
                        <td><code>3 - 2</code></td>
                        <td><code>1</code></td>
                    </tr>
                    <tr>
                        <td><code>*</code></td>
                        <td>Multiplication</td>
                        <td><code>3 * 2</code></td>
                        <td><code>6</code></td>
                    </tr>
                    <tr>
                        <td><code>/</code></td>
                        <td>Division</td>
                        <td><code>3 / 2</code></td>
                        <td><code>1.5</code></td>
                    </tr>
                    <tr>
                        <td><code>%</code></td>
                        <td>Modulo</td>
                        <td><code>3 % 2</code></td>
                        <td><code>1</code></td>
                    </tr>
                    <tr>
                        <td><code>^</code></td>
                        <td>Exponentiation</td>
                        <td><code>3 ^ 2</code></td>
                        <td><code>9</code></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <p>
            The order of operations in Kustom follows the standard mathematical order of operations.
        </p>

        <p>
            In this example, <code>2 ^ 1</code> gets evaluated first. Then the output of that evaluation gets put in
            place
            of <code>2 ^ 1</code>, and the formula is evaluated further:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>6 + 5 - 4 * 3 / <span class="hl hl-before">2 ^ 1</span></code>
                <div class="arrow"></div>
                <code>6 + 5 - 4 * 3 / <span class="hl hl-after">2</span></code>
            </div>
        </div>

        <p>
            Next there are two operators of equal "weight", so the leftmost one is evaluated first:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>6 + 5 - <span class="hl hl-before">4 * 3</span> / 2</code>
                <div class="arrow"></div>
                <code>6 + 5 - <span class="hl hl-after">12</span> / 2</code>
            </div>
        </div>

        <p>
            Then division:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>6 + 5 - <span class="hl hl-before">12 / 2</span></code>
                <div class="arrow"></div>
                <code>6 + 5 - <span class="hl hl-after">6</span></code>
            </div>
        </div>

        <p>
            Finally, the two remaining operators again get evaluated from left to right:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">6 + 5</span> - 6</code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">11</span> - 6</code>
            </div>

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">11 - 6</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">5</span></code>
            </div>

        </div>

        <p>
            And we arrive at an output:
        </p>

        <div class="snippet">
            <label class="output"></label>
            <code>5</code>
        </div>

        <p>
            Note that for certain calculations the output might not be 100% accurate due to rounding errors - a number
            inside your phone/computer can only store so many decimal places.
        </p>

        <p>
            You can influence the order in which operators are evaluated using parentheses:
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>3 * (2 + 1)</code>
        </div>

        <p>
            Because of the parentheses, addition gets evaluated before multiplication:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code>3 * <span class="hl hl-before">(2 + 1)</span></code>
                <div class="arrow"></div>
                <code>3 * <span class="hl hl-after">3</span></code>
            </div>

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">3 * 3</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">9</span></code>
            </div>

            <label class="output"></label>
            <code>9</code>

        </div>

        <h3 id="strings">Strings (text values)</h3>

        <h4 id="quoted-strings">Quoted strings</h4>

        <p>
            Text values, often referred to as strings, are used very, very frequently.
            To add one to your formula, wrap some text in quotation marks ("), which I'll also refer to as doublequotes.
            The quotation marks won't be part of the output.
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code><span class="hl hl-1">"I am a quoted string"</span></code>

            <label class="output"></label>
            <code><span class="hl hl-1">I am a quoted string</span></code>

        </div>

        <p>
            Strings have one operator that uses the same symbol as addition: <code>+</code> (concatenation).
            It joins two strings together:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code>
                <span class="hl hl-1">"abc"</span>
                <span>+</span>
                <span class="hl hl-2">"def"</span>
            </code>

            <label class="output"></label>
            <code><span class="hl hl-1">abc</span><span class="hl hl-2">def</span></code>

        </div>

        <p>
            Expressions inside quoted strings are not evaluated:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code><span class="hl hl-1">"2 + 1"</span></code>

            <label class="output"></label>
            <code><span class="hl hl-1">2 + 1</span></code>

        </div>

        <p>
            A common misconception I've seen is trying to use <code>$</code> to evaluate a part of a string.
            Instead, calculate the result separately and concatenate it with the other parts of the string.
        </p>

        <div class="snippet">

            <label class="ex-no subex first">
                <span class="error">incorrect, no evaluation will happen.</span>
            </label>
            <code><span class="hl hl-1">"2 + 2 is $2 + 2$!"</span></code>

            <label class="output"></label>
            <code><span class="hl hl-1">2 + 2 is $2 + 2$!</span></code>
        </div>

        <div class="snippet">

            <label class="ex-no subex">
                <span class="success">
                    corrrect, note the parentheses
                </span>
            </label>
            <code>
                <span class="hl hl-1">"2 + 2 is "</span>
                <span>+</span>
                <span class="hl hl-2">(2 + 2)</span>
                <span>+</span>
                <span class="hl hl-3">"!"</span>
            </code>

            <label class="output"></label>
            <code><span class="hl hl-1">2 + 2 is </span><span class="hl hl-2">4</span><span class="hl hl-3">!</span></code>

        </div>


        <h4 id="quoteless-strings">Quoteless strings</h4>

        <p>
            If you add text to a formula without using doublequotes, Kustom will interpret it as text:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code><span class="hl hl-1">I am a quoteless string</span></code>

            <label class="output"></label>
            <code><span class="hl hl-1">I am a quoteless string</span></code>

        </div>

        <p>
            Quoteless strings cannot contain special characters, like operator symbols, dollar signs or parentheses:
        </p>

        <div class="snippet">
            <label class="ex-no subex first">
                <span class="error">
                    incorrect, the second <code>$</code> will be treated as the end of the Kode part, making <code>1000</code> plain text and the last <code>$</code> an unclosed evaluated part.
                </span>
            </label>
            <code class="no-dollars"><span class="hl hl-false strong">$</span><span class="hl hl-false">Please give me </span><span class="hl hl-false strong">$</span>1000$</code>
        </div>

        <p>
            In those cases, quoted strings should be used:
        </p>

        <div class="snippet">
            <label class="ex-no subex">
                <span class="success">
                    correct, the $ is treated as part of the string
                </span>
            </label>
            <code><span class="hl hl-1">"Please give me $1000"</span></code>
        </div>

        <p>
            They can contain whitespace (like spaces or even new line characters), but any whitespace at the beginning or end will be trimmed out:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code>
                <span>first</span><span class="hl hl-1"> </span><span>string</span><span class="hl hl-2"> </span><span>+</span><span class="hl hl-2"> </span><span>second</span><span class="hl hl-1"> </span><span>string</span>
            </code>

            <label class="output"></label>
            <code><span>first</span><span class="hl hl-1"> </span><span>stringsecond</span><span class="hl hl-1"> </span><span>string</span></code>

        </div>

        <p>
            Notice that the <span class="hl hl-2">spaces around the + operator</span> <span>are not present in the output, but the</span> <span class="hl hl-1">spaces inside the quoteless strings</span> are preserved.
        </p>

        <p>
            If you are unsure which type of string to use, I'd recommend only using quoteless strings when the text you're writing is a constant value Kustom expects,
            like <code>ALWAYS</code> or <code>NEVER</code> for visibility, or when it's a function mode like <code>low</code> or <code>up</code> (more on those later).
        </p>

        <h4 id="operator-string-mode">The default string mode of operators</h4>

        <p>
            If you try using mathematical operators on text, you might notice something weird happening:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code>"a" * "b"</code>

            <label class="output"></label>
            <code>a*b</code>

        </div>

        <p>
            A very similar result occurs with most operators in Kode, except for ones specifically made to work differently with strings.
            Its main purpose is to allow strings containing operator characters to remain without doublequotes.
            You might have encountered it (and not noticed) when writing things like icon names:
        </p>

        <div class="snippet">

            <label class="ex-no"></label>
            <code><span class="hl hl-1">weather</span><span class="hl hl-2">-</span><span class="hl hl-1">sunny</span></code>

            <label class="output"></label>
            <code>weather-sunny</code>

        </div>

        <p>
            Notice that the example above is two <span class="hl hl-1">quoteless strings</span> and the <span class="hl hl-2">subtraction operator</span>, and not one continuous long string.
            This becomes far more obvious if you choose to quote the strings and add whitespace, which does not change the output:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <code><span class="hl hl-1">"weather"</span> <span class="hl hl-2">-</span> <span class="hl hl-1">"sunny"</span></code>

            <label class="output"></label>
            <code>weather-sunny</code>

        </div>

        <p>
            This behavior is present for all operators, except ones listed in the table below:
        </p>

        <div class="table-container">
            <table id="string-mode-table">
                <thead>
                    <tr>
                        <th>Operator</th>
                        <th>String mode</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>+</code></td>
                        <td>Concatenation</td>
                    </tr>
                    <tr>
                        <td><code>=</code></td>
                        <td>Check if two strings are the same</td>
                    </tr>
                    <tr>
                        <td><code>!=</code></td>
                        <td>Check if two strings are different</td>
                    </tr>
                    <tr>
                        <td><code>~=</code></td>
                        <td>Check if a string contains another string/regex test</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h4 id="note-on-combining-strings-and-numbers">Note on Combining strings and numbers</h4>

        <p>
            Kustom converts value types from one to another on the fly.
            Because of that, any string that can be parsed as a number (decimals like "<code>5.23</code>" count as numbers too!) will be converted to a number when using the <code>+</code> operator (and other operators too), as well as before being passed to (most) functions (more on those later).
            That parsed number will be used instead of the original string.
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>"   00002.0000   " + abc</code>
            <label class="output"></label>
            <code>2abc</code>
        </div>

        <p>
            This can lead to problems when trying to preserve things like leading zeroes or a trailing decimal point, or trying to concatenate numbers instead of adding them.
            A workaround for this issue is presented in the <a href="#concatenating-numbers">"Additional tips &amp; tricks"</a> section at the end of this guide.
        </p>


        <h2 id="functions">Functions</h2>

        <h3 id="functions-intro">Introduction to functions</h3>

        <p>
            Functions are the main part of Kode.
            Some of them can be used to get information, like the current time, weather, system information, calendar events and much more.
            Other functions can be used to perform mathematical calculations or transform text.
            Asking the function to do something is called "calling" the function. The basic structure of a function call is as follows:
        </p>

        <ol>
            <li>
                The <span class="hl hl-1">name</span> of the function to be called.<br />
                In Kode, functions have two letter names that are usually short for the full name of the function.
                For example, <code>df</code> is short for "Date Format", while <code>tc</code> is short for "Text Converter".
            </li>
            <li>
                <code class="hl hl-2">(</code> (an opening parenthesis),
            </li>
            <li>
                <span class="hl hl-3">Arguments</span> <span>separated by</span> <span class="hl hl-2">commas</span> <span class="nowrap">(<code class="hl hl-2">,</code>)</span>
            </li>
            <li>
                <code class="hl hl-2">)</code> (a closing parenthesis),
            </li>
        </ol>

        <div class="snippet">
            <label class="ex-no subex first"></label>
            <code><span class="hl hl-1">tc</span><span class="hl hl-2">(</span><span class="hl hl-3">low</span><span class="hl hl-2">,</span> <span class="hl hl-3">"Make Me Lowercase"</span><span class="hl hl-2">)</span></code>
        </div>

        <p>
            A function can also only take one argument:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <code><span class="hl hl-1">ai</span><span class="hl hl-2">(</span><span class="hl hl-3">isday</span><span class="hl hl-2">)</span></code>
        </div>

        <p>
            Or not take any:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <code><span class="hl hl-1">dp</span><span class="hl hl-2">()</span></code>
        </div>

        <p>
            Arguments can be expressions with values and operators or other function calls - anything that returns a value.
            Before a function is evaluated, all its arguments have to be evaluated.
            Consider this example of calling <code>tc()</code> (Text Converter), with one of the arguments being a concatenation of two strings:
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>tc(low, "Make Me " + "Lowercase")</code>
        </div>

        <p>
            In this example, the concatenation gets evaluated first:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, <span class="hl hl-before">"Make Me " + "Lowercase"</span>)</code>
                <div class="arrow"></div>
                <code>tc(low, <span class="hl hl-after">"Make Me Lowercase"</span>)</code>
            </div>
        </div>

        <p>
            Now, the function can take both arguments and turn them into a result. In this case, the first argument is a mode string, which tells the function what to do with the other argument.
            The <code>low</code> mode of <code>tc()</code> converts the string given in the second argument to lowercase:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">tc(low, "Make Me Lowercase")</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">"make me lowercase"</span></code>
            </div>

            <label class="output"></label>
            <code>make me lowercase	</code>

        </div>

        <p>
            If we instead changed the mode argument to <code>up</code>, <code>tc()</code> would instead convert the string to uppercase:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">tc(up, "Make Me Lowercase")</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">"MAKE ME LOWERCASE"</span></code>
            </div>

            <label class="output"></label>
            <code>MAKE ME LOWERCASE	</code>

        </div>

        <p>
            You can also use another function call as an argument. Because arguments need to be evaluated before the function call, these calls will be evaluated from the inside out.
            In this example, <code>mi()</code> stands for Music Info, and mode <code>title</code> returns the title of the currently playing music.
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>tc(low, mi(title))</code>
        </div>

        <p>
            The "deeper" function gets evaluated first:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, <span class="hl hl-before">mi(title)</span>)</code>
                <div class="arrow"></div>
                <code>tc(low, <span class="hl hl-after">"Music Title"</span>)</code>
            </div>
        </div>

        <p>
            Now the <code>tc()</code> call can be evaluated:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">tc(low, "Music Title")</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">"music title"</span></code>
            </div>
            <label class="output"></label>
            <code>music title</code>

        </div>

        <p>
            You can also combine function calls with operators:
        </p>

        <div class="snippet">
            <label class="ex-no"></label>
            <code>tc(low, mi(artist) + " - " + mi(title))</code>
        </div>

        <p>
            Before a <code>+</code> (concatenation) operation can be evaluated, both its sides need to be evaluated.
            This means that in this example, <code>mi(artist)</code> (returns the artist behind currently playing music)
            will get evaluated first:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, <span class="hl hl-before">mi(artist)</span> + " - " + mi(title))</code>
                <div class="arrow"></div>
                <code>tc(low, <span class="hl hl-after">"Artist Name"</span> + " - " + mi(title))</code>
            </div>
        </div>

        <p>
            After that, the first concatenation can be evaluated:
        </p>

        <div class="snippet">
            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, <span class="hl hl-before">"Artist Name" + " - "</span> + mi(title))</code>
                <div class="arrow"></div>
                <code>tc(low, <span class="hl hl-after">"Artist Name - "</span> + mi(title))</code>
            </div>
        </div>

        <p>
            Then <code>mi(title)</code> and the second concatenation:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, "Artist Name - " + <span class="hl hl-before">mi(title)</span>)</code>
                <div class="arrow"></div>
                <code>tc(low, "Artist Name - " + <span class="hl hl-after">"Music Title"</span>)</code>
            </div>

            <label class="ex-no subex"></label>
            <div class="step">
                <code>tc(low, <span class="hl hl-before">"Artist Name - " + "Music Title"</span>)</code>
                <div class="arrow"></div>
                <code>tc(low, <span class="hl hl-after">"Artist Name - Music Title"</span>)</code>
            </div>

        </div>

        <p>
            Finally, the <code>tc()</code> call can get evaluated:
        </p>

        <div class="snippet">

            <label class="ex-no subex"></label>
            <div class="step">
                <code><span class="hl hl-before">tc(low, "Artist Name - Music Title")</span></code>
                <div class="arrow"></div>
                <code><span class="hl hl-after">"artist name - music title"</span></code>
            </div>

            <label class="output"></label>
            <code>artist name - music title</code>
        </div>

        <p>
            Keep in mind that all the problems you'd see with strings containing numbers also apply to function return
            values.
            If you try to concatenate a function's result that is a number and a string number, you'll get addition
            instead.
        </p>


        <h4 id="note-on-regex">Note on Regex (regular expressions)</h3>

            <p>
                While Regex/regular expressions might sound scary if you haven't used them before, they are a very powerful tool that is worth learning.
                They are not used only in Kustom, you can make use of them in other tools and programming languages for advanced text searching and replacing.
            </p>

            <p>
                A regular expression is a string consisting of regular characters and special characters that can match different characters or multiple characters, called a <span class="hl hl-2">pattern</span>.
                Regular expressions are used to search for a <span class="hl hl-2">pattern</span> <span>in a</span>
                <hl class="hl hl-1">string</hl><span>, and often also to replace whatever it matches with</span> <span class="hl hl-3">something else</span>.
            </p>

            <p>
                In Kustom, <code>tc()</code> has a mode that allows you to make use of regular expressions - <code>tc(reg)</code>. This function accepts 3 arguments after the mode:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tc(reg, <span class="hl hl-1">string</span>, <span class="hl hl-2">pattern</span>, <span class="hl hl-3">replacement</span>)</code>
            </div>

            <p>
                If you don't want to learn regex, please just note that you can use <code>tc(reg)</code> to simply replace all occurences of a string with another string:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tc(reg, <span class="hl hl-1">"I like trains"</span>, <span class="hl hl-2">"like"</span>, <span class="hl hl-3">"don't like"</span>)</code>

                <label class="output"></label>
                <code>I don't like trains</code>

            </div>

            <p>
                Here is an example of using a pattern to remove everything after a dash by replacing it with an empty string:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tc(reg, <span class="hl hl-1">"This part is wanted - this part isn't"</span>, "<span class="hl hl-2"> -.*</span>", <span class="hl hl-3">""</span>)</code>

                <label class="output"></label>
                <code>This part is wanted</code>

            </div>

            <p>
                Here is what the <span class="hl hl-2">pattern</span> does:
            </p>

            <ul>
                <li><code><pre> -</pre></code> matches a space and a dash,</li>
                <li><code>.*</code> matches any character <span class="nowrap">(<code>.</code>)</span> 0 or more times <span class="nowrap">(<code>*</code>)</span></li>
            </ul>

            <p>
                Note that in the <span class="hl hl-3">replacement string</span>, <code>$0</code> can be used to refer to the entire match, and <code>$1</code>,
                <code>$2</code>, …, <code>$9</code> to groups 1-9 of the match.
            </p>

            <p>
                I won't go in depth about regex here, as it'd be repeating work already done better elsewhere.
                I'll instead provide you some links if you'd like to learn, but don't know where to begin:
            </p>

            <ul>
                <li>
                    <a href="https://regexone.com/">RegexOne</a> can help you master the basics by giving you exercises as you go,
                </li>
                <li>
                    <a href="https://regex101.com/">Regex101</a> is a great tool to build patterns with, letting you test on any text you want, as well as highlighting what your pattern selects and why,
                </li>
                <li>
                    <a href="https://regexr.com/">Regexr</a> is a similar tool, but with a different user interface,
                </li>
                <li>
                    <a href="https://www.autoregex.xyz/">AutoRegex</a> is a tool that attempts to translate english into a regex pattern. It is not 100% accurate all the time, but it might help you learn.
                </li>
            </ul>

            <p>

            </p>

            <h3 id="doing-a-or-b-depending-on-x">Doing A or B depending on X</h3>


            <h4 id="boolean-intro">Introduction to boolean values</h4>

            <p>
                A boolean value is either <span class="hl hl-true">true</span> (represented as <code class="hl-true">1</code> in Kustom)
                or <span class="hl hl-false">false</span> (represented as <code class="hl-false">0</code> in Kustom).
            </p>

            <p>
                In most cases, we'll obtain a boolean value from a function like <code>ai(isday)</code>
                (<code class="hl-true">1</code> when it is day, <code class="hl-false">0</code> otherwise)
                or <code>si(locked)</code> (<code class="hl-true">1</code> when the phone is locked, <code class="hl-false">0</code> otherwise),
                or, alternatively, from comparing two values using one of the comparison operators listed below:
            </p>

            <div class="table-container">
                <table id="comparison-operator-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Name</th>
                            <th>Returns <code>1</code></th>
                            <th>Returns <code>0</code></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>=</code></td>
                            <td>Equal</td>
                            <td><code>1 = 1</code></td>
                            <td><code>1 = 2</code></td>
                        </tr>
                        <tr>
                            <td><code>!=</code></td>
                            <td>Not equal</td>
                            <td><code>1 != 2</code></td>
                            <td><code>1 != 1</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;</code></td>
                            <td>Less than</td>
                            <td><code>1 &lt; 2</code></td>
                            <td><code>2 &lt; 1</code></td>
                        </tr>
                        <tr>
                            <td><code>&gt;</code></td>
                            <td>Greater than</td>
                            <td><code>2 &gt; 1</code></td>
                            <td><code>1 &gt; 2</code></td>
                        </tr>
                        <tr>
                            <td><code>&lt;=</code></td>
                            <td>Less than or equal</td>
                            <td><code>1 &lt;= 1</code></td>
                            <td><code>2 &lt;= 1</code></td>
                        </tr>
                        <tr>
                            <td><code>&gt;=</code></td>
                            <td>Greater than or equal</td>
                            <td><code>1 &gt;= 1</code></td>
                            <td><code>1 &gt;= 2</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>
                If you try to compare text and a number, Kustom will try its best to convert the text to a number before
                comparing them.
                That means that a number is equal to its string representation, as far as Kustom is concerned.
                All following examples will return <code><span class="hl hl-11">1</span></code> (<span class="hl hl-11">true</span>):
            </p>

            <div class="snippet">

                <label class="ex-no subex first"></label>
                <code>"2" = 2</code>

                <label class="ex-no subex"></label>
                <code>"00002" = 2</code>

                <label class="ex-no subex"></label>
                <code>"2.0000" = 2</code>

                <label class="ex-no subex"></label>
                <code>"   00002.0000   " = 2</code>

            </div>


            <h4 id="if-conditions">Conditions and <code>if()</code></h4>

            <p>
                <code>if()</code> is a very frequently used function that is closely connected to booleans.
                Unlike <code>tf()</code> or <code>mi()</code>, it doesn't take a mode argument. The most basic version of an <code>if()</code> call looks like this:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>if(<span class="hl hl-1">[condition]</span>, <span class="hl hl-true">[value if condition true]</span>)</code>
            </div>

            <p>
                The function will return the second argument if the boolean given to it in the first argument is <code class="hl-true">1</code> <span class="nowrap">(<span class="hl hl-true">true</span>)</span>,
                Otherwise, the function will return seemingly nothing - an empty string, which can be written as two quotation marks next to one another <span class="nowrap">(<code>""</code>)</span>.
                In this example, <code>2 = 2</code> first evaluates to <code class="hl-true">1</code> <span class="nowrap">(<span class="hl hl-true">true</span>)</span>:
            </p>

            <div class="snippet">
                <label class="ex-no subex first"></label>
                <div class="step">
                    <code>if(<span class="hl hl-1">2 = 2</span>, <span class="hl hl-true">"Reality is still intact"</span>)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-true">1</span>, <span class="hl hl-true">"Reality is still intact"</span>)</code>
                </div>
            </div>

            <p>
                Since the condition argument is <code class="hl-true">1</code> (<span class="hl hl-true">true</span>), <code>if()</code> will return the value of the second argument:
            </p>

            <div class="snippet">
                <label class="output"></label>
                <code><span class="hl hl-13">Reality is still intact</span></code>
            </div>

            <p>
                If a third argument is provided to the call, it'll be returned when the condition is <code class="hl-false">0</code> (<span class="hl hl-false">false</span>):
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>if(<span class="hl hl-1">[condition]</span>, <span class="hl hl-true">[value if condition true]</span>, <span class="hl hl-false">[value if condition false]</span>)</code>
            </div>

            <div class="snippet">
                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-1">1 = 2</span>, <span class="hl hl-true">"Weird"</span>, <span class="hl hl-false">"Normal"</span>)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-false">0</span>, <span class="hl hl-true">"Weird"</span>, <span class="hl hl-false">"Normal"</span>)</code>
                </div>
            </div>

            <div class="snippet">
                <label class="output"></label>
                <code><span class="hl hl-false">Normal</span></code>
            </div>


            <p>
                It's worth noting that empty strings <span class="nowrap">(<code>""</code>)</span> are considered false by <code>if()</code>, while any other value will be considered true:
            </p>

            <div class="snippet">

                <label class="ex-no subex first"></label>
                <code>if(<span class="hl hl-false">""</span>, <span class="hl hl-true">"true"</span>, <span class="hl hl-false">"false"</span>)</code>

                <label class="output"></label>
                <code><span class="hl hl-false">false</span></code>

                <label class="ex-no subex"></label>
                <code>if(<span class="hl hl-true">"text"</span>, <span class="hl hl-true">"true"</span>, <span class="hl hl-false">"false"</span>)</code>

                <label class="output"></label>
                <code><span class="hl hl-true">true</span></code>

            </div>

            <p>
                <code>if()</code> calls can be extended with more pairs of <span class="hl hl-1">condition</span>-<span class="hl hl-2">value</span> arguments:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>if(<span class="hl hl-1">1 = 2</span>, <span class="hl hl-2">"first"</span>, <span class="hl hl-1">2 = 2</span>, <span class="hl hl-2">"second"</span>, <span class="hl hl-1">3 = 3</span>, <span class="hl hl-2">"third"</span>, <span class="hl hl-false">"none"</span>)</code>
            </div>

            <p>
                The function will go through each <span class="hl hl-1">condition</span> argument in order until it finds one that is <span class="hl hl-true">true</span>.
                If a <span class="hl hl-true">true</span> condition argument is found, the <span class="hl hl-2">value</span> from its pair is returned:
            </p>

            <div class="snippet">
                <label class="ex-no subex"></label>
                <code>
                if(<span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"first"</span>, 
                <span class="hl hl-true">1</span>, 
                <span class="hl hl-2 strong">"second"</span>, 
                <span class="hl hl-true">1</span>, 
                <span class="hl hl-2">"third"</span>, 
                <span class="hl hl-false">"none"</span>)
            </code>
                <label class="output"></label>
                <code><span class="hl hl-2 strong">second</span></code>
            </div>

            <p>
                If all conditions turn out to be <span class="hl hl-false">false</span>, <code>if()</code> will return the <span class="hl hl-false strong">last argument</span>:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
                if(<span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"first"</span>, 
                <span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"second"</span>, 
                <span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"third"</span>, 
                <span class="hl hl-false strong">"none"</span>)
            </code>

                <label class="output"></label>
                <code><span class="hl hl-false strong">none</span></code>

            </div>

            <p>
                If the last argument isn't present, an empty string <span class="nowrap">(<code>""</code>)</span> will be returned:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
                if(<span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"first"</span>, 
                <span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"second"</span>, 
                <span class="hl hl-false">0</span>, 
                <span class="hl hl-2">"third"</span>)
            </code>

                <label class="output"></label>
                <code></code>

            </div>

            <h4 id="logical-operators">Combining conditions using logical operators</h4>

            <p>
                Sometimes one condition is not enough and you need to combine multiple conditions.
            </p>

            <p>
                Maybe your battery icon should only be coloured red if the battery is below 15% <strong>and</strong> the battery is discharging.
            </p>

            <p>
                Maybe you'd like to display "Weekend!" when it is Saturday <strong>or</strong> Sunday.
            </p>

            <p>
                Kode has two operators for combining boolean values, logical AND, represented by an ampersand <span class="nowrap">(<code>&amp;</code>)</span> and logical OR, represented by a pipe <span class="nowrap">(<code>|</code>)</span>.
                AND only returns <span class="hl hl-true">true</span> when values on both sides of it are <span class="hl hl-true">true</span>.
                OR returns <span class="hl hl-true">true</span> when one or both of the values are <span class="hl hl-true">true</span>.
            </p>

            <p>
                The table below illustrates all the different combinations of boolean inputs and what combining them with AND and OR will result in.
            </p>

            <div class="table-container">
                <table id="logical-operator-table">
                    <thead>
                        <tr>
                            <th><code>A</code></th>
                            <th><code>B</code></th>
                            <th><code>A & B</code></th>
                            <th><code>A | B</code></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-false"><code>0</code></td>
                        </tr>
                        <tr>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-true"><code>1</code></td>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-true"><code>1</code></td>
                        </tr>
                        <tr>
                            <td class="hl-true"><code>1</code></td>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-false"><code>0</code></td>
                            <td class="hl-true"><code>1</code></td>
                        </tr>
                        <tr>
                            <td class="hl-true"><code>1</code></td>
                            <td class="hl-true"><code>1</code></td>
                            <td class="hl-true"><code>1</code></td>
                            <td class="hl-true"><code>1</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>
                To illustrate how <code>&</code> and <code>|</code> can be used in conjunction with <code>if()</code>, let's write formulas for the two examples I mentioned at the start of this section.
            </p>

            <p>
                The first example was coloring a battery icon red if the battery is below 15% <strong>and</strong> the battery is discharging.
            </p>

            <ul>
                <li>
                    <code>bi(level)</code> returns the current battery level (from <code>0</code> to <code>100</code>),
                </li>
                <li>
                    <code>bi(charging)</code> returns <code class="hl-true">1</code> if the phone is charging and <code class="hl-false">0</code> otherwise,
                </li>
                <li>
                    <code>#ff0000</code> is the color hex for red, <code>#ffffff</code> is the color hex for white.
                </li>
            </ul>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>if(bi(level) &lt; 15 &amp; bi(charging) = 0, #ff0000, #ffffff)</code>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">bi(level)</span> <span>&lt; 15 &amp;</span> <span class="hl hl-before">bi(charging)</span> <span>= 0, #ff0000, #ffffff)</span></code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">10</span> <span>&lt; 15 &amp;</span> <span class="hl hl-after">1</span> <span>= 0, #ff0000, #ffffff)</span></code>
                </div>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">10 &lt; 15</span> <span>&amp;</span> <span class="hl hl-before">1 = 0</span>, #ff0000, #ffffff)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">1</span> <span>&amp;</span> <span class="hl hl-after">1</span>, #ff0000, #ffffff)</code>
                </div>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">1 &amp; 1</span>, #ff0000, #ffffff)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">1</span>, #ff0000, #ffffff)</code>
                </div>

                <label class="output"></label>
                <code>#ff0000</code>
            </div>

            <p>
                The second example was displaying "Weekend!" when it is Saturday <strong>or</strong> Sunday.
            </p>

            <ul>
                <li>
                    <code>df(f)</code> returns the current weekday (Monday being <code>1</code> and Sunday being <code>7</code>),
                </li>
                <li>
                    assume it is Saturday.
                </li>
            </ul>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>if(df(f) = 6 | df(f) = 7, "Weekend!")</code>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">df(f) = 6</span> <span>|</span> <span class="hl hl-before">df(f) = 7</span>, "Weekend!")</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">6 = 6</span> <span>|</span> <span class="hl hl-after">6 = 7</span>, "Weekend!")</code>
                </div>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>
                    if(<span class="hl hl-before">6 = 6</span>
                    <span>|</span>
                    <span class="hl hl-before">6 = 7</span>, "Weekend!")
                </code>
                    <div class="arrow"></div>
                    <code>
                    if(<span class="hl hl-after">1</span> <span>|</span> <span class="hl hl-after">0</span>, "Weekend!")
                </code>
                </div>

                <label class="ex-no subex"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">1 | 0</span>, "Weekend!")</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">1</span>, "Weekend!")</code>
                </div>

                <label class="output"></label>
                <code>Weekend!</code>

            </div>

            <p>
                There are some important differences in how <code>if()</code> treats values other than <code class="hl-true">1</code> and <code class="hl-false">0</code>
                and how <code>&</code> and <code>|</code> do it.
            </p>

            <p>
                <code>&amp;</code> and <code>|</code> have a default string mode like described in <a href="#operator-string-mode">"The default string mode of operators"</a>.
            </p>

            <p>
                For the following examples, assume no music player has been opened, so <code>mi(artist)</code> and <code>mi(title)</code> are empty strings <span class="nowrap">(<code>""</code>)</span>.
            </p>

            <p>
                Trying to check if two strings are empty is not possible like this:
            </p>

            <div class="snippet">
                <label class="ex-no subex first">
                    <span class="error">Incorrect - the empty strings will be concatenated with the operator symbol in between.</span>
                </label>
                <code>mi(artist) & mi(title)</code>

                <label class="output"></label>
                <code>&</code>
            </div>

            <p>
                Instead, a comparison needs to an empty string needs to be made explicitly:
            </p>

            <div class="snippet">
                <label class="ex-no subex">
                    <span class="success">Correct - the comparisons will first be evaluated to 0 or 1.</span>
                </label>
                <div class="step">
                    <code>
                    <span class="hl hl-before">mi(artist) = ""</span>
                    <span>&</span>
                    <span class="hl hl-before">mi(title) = ""</span>
                </code>
                    <div class="arrow"></div>
                    <code>
                    <span class="hl hl-after">1</span>
                    <span>&</span> 
                    <span class="hl hl-after">1</span>
                </code>
                </div>

                <label class="output"></label>
                <code>1</code>
            </div>

            <p>
                If the arguments are not strings, but numbers, any number given to <code>&</code> and <code>|</code> that isn't a <code class="hl-true">1</code> will be
                treated as <span class="hl hl-false">false</span>.
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code><span class="hl hl-false">5</span><span> | </span><span class="hl hl-false">0</span></code>

                <label class="output"></label>
                <code><span class="hl hl-false">0</span></code>

            </div>


            <h4 id="logical-not">Inverting booleans</h4>

            <p>
                Kustom lacks a dedicated operator for inverting booleans (returning <code class="hl-true">1</code> when given <code class="hl-false">0</code> and vice versa).
                It is possible to compare a boolean to <code class="hl-false">0</code> to achieve the same result (assume it is day and so <code>ai(isday)</code> returns <code class="hl-true">1</code>):
            </p>

            <div class="snippet">

                <label class="ex-no subex first"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">ai(isday)</span> = 0, night, day)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">1</span> = 0, night, day)</code>
                </div>

                <label class="ex-no subex first"></label>
                <div class="step">
                    <code>if(<span class="hl hl-before">1 = 0</span>, night, day)</code>
                    <div class="arrow"></div>
                    <code>if(<span class="hl hl-after">0</span>, night, day)</code>
                </div>

                <label class="output"></label>
                <code>day</code>

            </div>

            <p>
                If you want to invert the result of a comparison, you can also invert its operator, by for example swapping <code>=</code> with <code>!=</code>, or <code>&gt;</code> with <code>&lt;=</code>.
            </p>

            <p>
                Finally, you can also invert the result of <code>if()</code> calls by simply swapping the second and third argument.
            </p>

            <h4 id="contains-operator">Contains/Regex test: <code>~=</code></h4>

            <p>
                This operator got its own separate mention, because it's distinct from the other comparison operators, but it still
                returns
                a boolean. In its most basic form, this operator checks whether the left hand side string has the right hand
                side string inside it, which can be read as "check if A contains B".
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>abc ~= a</code>

                <label class="output"></label>
                <code><span class="hl hl-true">1</span></code>

                <label class="ex-no"></label>
                <code>abc ~= d</code>

                <label class="output"></label>
                <code><span class="hl hl-false">0</span></code>

            </div>

            <p>
                Note for advanced users: this operator tests if the left argument matches any part of the regex expression
                provided as the right argument. It is possible to use it to check if the entire left argument matches the
                expression by having the expression start with <code>^</code> (match start of string) and end with
                <code>$</code> (match end of string).
            </p>


            <h3 id="local-variable-intro">Writing cleaner formulas with <code>lv()</code></h3>

            <p>
                If you've written any kind of longer formula before, you might have ran into something like this:
            </p>

            <blockquote>
                "I've written this lengthy bit of Kode that gets the value I need, but I need to use it in multiple places, so now I had to copy it everywhere, and now fixing the formula is a nightmare."
            </blockquote>

            <p>
                Recently at the time of writing, a new function called <code>lv()</code> (Local Variable, <a href="https://help.kustom.rocks/i2177-lv-local-variables">requested</a> by yours truly) was introduced.
                This function can be used to solve the problem described above.
            </p>

            <p>
                The basic usage of <code>lv()</code> starts by calling it with two arguments to store a <span class="hl hl-2">value</span> <span>in a local variable under a given</span> <span class="hl hl-1">name</span>:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>lv(<span class="hl hl-1">name</span><span>,</span> <span class="hl hl-2">value</span>)</code>

                <label class="output"></label>
                <code>&nbsp;</code>

            </div>

            <p>
                Calling <code>lv()</code> with two arguments always returns an empty string.
                This is because it is meant to be used within a formula, but without changing the result on its own.
            </p>

            <p>
                To later retrieve a value stored in a local variable, you can call <code>lv()</code> with only one argument, the name of the variable:
            </p>

            <div class="snippet">

                <label class="ex-no subex first"></label>
                <code>lv(<span class="hl hl-1">name</span>)</code>

                <label class="output"></label>
                <code><span class="hl hl-2">value</span></code>

            </div>

            <p>
                When using this syntax, if a variable isn't found, a warning will show up and an empty string <span class="nowrap">(<code>""</code>)</span> will be returned.
            </p>

            <p>
                Alternatively, you can use the new <code>#</code> syntax. Kustom will try to find a local variable for any quoted or unquoted string starting with <code>#</code>:
            </p>

            <div class="snippet">

                <label class="ex-no subex"></label>
                <code>#<span class="hl hl-1">name</span></code>

                <label class="output"></label>
                <code><span class="hl hl-2">value</span></code>

            </div>

            <p>
                When using this syntax, if a variable isn't found, Kustom will simply return the string as-is:
            </p>

            <div class="snippet">

                <label class="ex-no subex"></label>
                <code>#name2</code>

                <label class="output"></label>
                <code>#name2</code>

            </div>

            <p>
                Let's use an example to illustrate how <code>lv()</code> can help you write cleaner formulas.
                For this example, let's say we've written a formula that loads a list of quotes from a text file, and we would now like to display a random quote (line) from that list:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>wg("file:///sdcard/quotes.txt", raw)</code>

                <label class="output"></label>
                <code>
<pre>"I like trains" - Albert Einstein
"This sentence is false" - Archimedes
...</pre>
                </code>

            </div>

            <p>
                We can use <code>tc(split)</code> to split the text into a list of lines and take a line at an index.
                The index of the line will be random, but it needs to an index of a line, and not just any random number.
                <code>tc(lines)</code> can be used to obtain the number of lines in a given string.
                Then, <code>mu(rnd)</code> can be used to get a random number between 0 and the maximum index, which is number of lines - 1.
            </p>

            <p>If all of that is combined into a formula, it will look like this:</p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tc(split, wg("file:///sdcard/quotes.txt", raw)), mu(rnd, tc(lines, wg("file:///sdcard/quotes.txt", raw)) - 1))</code>

                <label class="output"></label>
                <code>"I like trains" - Albert Einstein</code>

            </div>

            <p>
                Not only is this formula long and hard to read, if we now wanted to change the path to the file with the quotes, we would have to change it in two different places.
                It's not hard to imagine formulas like this getting out of hand very quickly, as the number of different values needing to be copied and pasted increases.
            </p>

            <p>
                To clean this up, let's first place the quotes into a local variable, and then use that variable in the formula:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
<pre><span class="hl hl-1">lv(quotes, wg("file:///sdcard/quotes.txt", raw))</span> <span>+</span>
tc(split, <span class="hl hl-1">#quotes</span>, mu(rnd, tc(lines, <span class="hl hl-1">#quotes</span>) - 1))</pre>
                </code>

                <label class="output"></label>
                <code>"I like trains" - Albert Einstein</code>

            </div>

            <p>
                This formula takes advantage of the fact that <code>lv()</code> returns an empty string and uses <code>+</code> to concatenate that empty string to the actual result of the formula.
                The part actually generating the result has gotten much shorter, and if the path to the file changes, it only needs to be changed in one place.
            </p>

            <p>
                You could also use <code>lv()</code> to split calculations into multiple steps.
                Here, two sides of a right triangle are given.
                The formula calculates the third side using the Pythagorean theorem and stores that in another variable.
                Finally, it uses the three variables to return the circumference of the triangle:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
<pre>
lv(<span class="hl hl-1">a</span>, 245)) <span>+</span>
lv(<span class="hl hl-2">b</span>, 310)) <span>+</span>
lv(<span class="hl hl-3">c</span>, mu(sqrt, <span class="hl hl-1">#a</span> ^ 2 + <span class="hl hl-2">#b</span> ^ 2))</span> <span>+</span>
<span class="hl hl-1">#a</span> <span>+</span> <span class="hl hl-2">#b</span> <span>+</span> <span class="hl hl-3">#c</span></pre>
                </code>

            </div>

            <p>
                Even with basic usage, <code>lv()</code> is a powerful tool that can help you make even complex formulas readable, debuggable and modifiable.
            </p>


            <h2 id="more-value-types">More value types</h2>

            <h3 id="date-and-time">Date &amp; time</h3>

            <p>
                Date &amp; time is another value type in Kustom. It holds information about a specific point in time, down
                to a second. A date & time comprises of the following components:
            </p>

            <ul>
                <li><code class="hl-1">y</code> - Year</li>
                <li><code class="hl-2">M</code> - Month</li>
                <li><code class="hl-3">d</code> - Day</li>
                <li><code class="hl-4">h</code> - Hour</li>
                <li><code class="hl-5">m</code> - Minute</li>
                <li><code class="hl-6">s</code> - Second</li>
            </ul>


            <h4 id="date-printing">Displaying a date &amp; time using <code>df()</code></h4>

            <p>
                <code>df()</code> (Date Format) is a function that can be used to display data from a datetime value in any format you
                want.
                In its simplest form, it takes one text argument, that being the format, and displays (prints) the current date &amp;
                time in that format:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df("<span class="hl hl-1">yyyy</span>-<span class="hl hl-2">MM</span>-<span class="hl hl-3">dd</span> <span class="hl hl-4">hh</span>:<span class="hl hl-5">mm</span>:<span class="hl hl-6">ss</span>")</code>

                <label class="output"></label>
                <code><span class="hl hl-1">2022</span>-<span class="hl hl-2">07</span>-<span class="hl hl-3">11</span> <span class="hl hl-4">01</span>:<span class="hl hl-5">33</span>:<span class="hl hl-6">59</span></code>

            </div>

            <p>
                Using the same token letter multiple times will cause the value to be padded with zeroes to the left until it reaches the same number of characters as the number of letters:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df(dddddddd)</code>

                <label class="output"></label>
                <code>00000012</code>

            </div>

            <p>
                Other tokens can also print a textual representation of the given component:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df(EEEE, d MMM yyyy)</code>

                <label class="output"></label>
                <code>Fri, 11 Nov 2022</code>

            </div>

            <p>
                Check out the <a href="https://help.kustom.rocks/i2554-df-date-format-represent-a-time-instant-as-text">official <code>df()</code> function documentation page</a> for all the different tokens you can use.
            </p>

            <p>
                If you try to add a description after a token, you might run into a problem like this:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df("<span class="hl hl-5">m</span> <span class="hl hl-5">m</span><span>inute</span><span class="hl hl-6">s</span>")</code>

                <label class="output"></label>
                <code><span class="hl hl-5">34</span> <span class="hl hl-5">34</span><span>inute</span><span class="hl hl-6">28</span></code>

            </div>

            <p>
                The letters <code class="hl-5">m</code> and <code class="hl-6">s</code> in the
                word <code>minutes</code> were interpreted as tokens and, consequently, replaced by numbers.
                To prevent that from happening, you can wrap what you want to be just text in singlequotes <span class="nowrap">(<code>'</code>)</span>:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df("<span class="hl hl-5">m</span> <span class="hl hl-gray strong">'</span><span class="hl hl-gray">minutes</span><span class="hl hl-gray strong">'</span>")</code>

                <label class="output"></label>
                <code><span class="hl hl-5">34</span> <span class="hl hl-gray">minutes</span></code>

            </div>


            <p>
                A token deserving a separate mention is <code>H</code>, which prints the current hour in a 24-hour format.
                This is useful for making time comparisons - with just <code>h</code>, you can't tell the difference between 1 AM and 1 PM, for example.
            </p>

            <p>
                Here's an example that returns:
            </p>

            <ul>
                <li>"morning" until <span class="hl hl-1">12 AM</span>,</li>
                <li>"afternoon" after <span class="hl hl-1">12 AM</span> and until <span class="hl hl-2">6:30 PM</span>, </li>
                <li>"evening" after <span class="hl hl-2">6:30 PM</span> and until <span class="hl hl-3">9 PM</span>, </li>
                <li>"night" after <span class="hl hl-3">9 PM</span>:</li>
            </ul>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
<pre>if(
    df(Hmm) &lt;= <span class="hl hl-1">1200</span>, 
    morning, 
    df(Hmm) &lt;= <span class="hl hl-2">1830</span>, 
    afternoon
    df(Hmm) &lt;= <span class="hl hl-3">2100</span>, 
    evening,
    night
)</pre>
            </code>

            </div>

            <p>
                If a date &amp; time value is given as the second argument to <code>df()</code>, it'll be used instead of
                the current date &amp; time.
                In this example, the <span class="hl hl-1">start date &amp; time of the first upcoming calendar event</span> is formatted and printed:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>df("yyyy-MM-ss hh:mm:ss a", <span class="hl hl-1">ci(start, 0)</span>)</code>

                <label class="output"></label>
                <code>2022-08-11 08:00:00 AM</code>

            </div>


            <h4 id="kustom-date-format">The Kustom date & time format</h4>

            <p>
                <code>dp()</code> is a function that can be used to create datetime values from text or numbers.
                When no arguments are given, it returns the current date and time as a datetime value, in the Kustom date format:
            </p>

            <ul>
                <li><code class="hl-1">2019y</code> means that the year is 2019,</li>
                <li><code class="hl-2">10M</code> means that the month is 10,</li>
                <li><code class="hl-5">24m</code> means that it's the 24th minute etc.</li>
            </ul>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>dp()</code>

                <label class="output"></label>
                <code><span class="hl hl-1">2019y</span><span class="hl hl-2">10M</span><span class="hl hl-3">11d</span><span class="hl hl-4">15h</span><span class="hl hl-5">24m</span><span class="hl hl-6">28s</span></code>

            </div>

            <p>
                Date & time values written in this string format can not only be passed to <code>dp()</code> to get a date & time value, but also directly to functions expecting a date & time argument, like <code>df()</code>:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>
                df("yyyy-MM-ss hh:mm:ss a",
                <span class="hl hl-1">2022y</span><span class="hl hl-2">11M</span><span class="hl hl-3">10d</span><span class="hl hl-4">13h</span><span class="hl hl-5">13m</span><span class="hl hl-6">41s</span>)
            </code>

                <label class="output"></label>
                <code>
                <span class="hl hl-1">2022</span>-<span class="hl hl-2">11</span>-<span class="hl hl-3">10</span> 
                <span class="hl hl-4">01</span>:<span class="hl hl-5">13</span>:<span class="hl hl-6">41</span> 
                <span class="hl hl-4">PM</span>
            </code>

            </div>

            <p>
                The Kustom date & time format also includes an easy way to <span class="hl hl-true">add to</span> or <span class="hl hl-false">subtract from</span> a date &amp; time value.
                Any amount of time you specify after an <code class="hl-true strong">a</code> will be added to the date,
                and anything after an <code class="hl-false strong">r</code> will be subtracted (which you can remember as <span class="hl hl-true strong">a</span><span class="hl hl-true">dd</span>/<span class="hl hl-false strong">r</span><span class="hl hl-false">emove</span>).
            </p>

            <p>
                In this example, I'll specify a date & time using the Kustom format, and then <span class="hl hl-true strong">add</span><span> </span><span class="hl hl-true">1 day, 2 hours, 3 minutes and 4 seconds</span> to it:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>dp(2019y10M4d10h24m32s<span class="hl hl-true strong">a</span><span class="hl hl-true">1d2h3m4s</span>)</code>

                <label class="output"></label>
                <code>2019y10M<span class="hl hl-true">5d12h27m36s</span></code>

            </div>

            <p>
                In this example, I'll again specify a date & time, and then <span class="hl hl-false strong">subtract</span><span> </span><span class="hl hl-false">1 day, 2 hours, 3 minutes and 4 seconds</span> from it:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>dp(2019y10M4d10h24m32s<span class="hl hl-false strong">r</span><span class="hl hl-false">1d2h3m4s</span>)</code>

                <label class="output"></label>
                <code>2019y10M<span class="hl hl-false">3d8h21m28s</span></code>

            </div>

            <p>
                You can also combine both adding and subtracting - in this example I'll both <span class="hl hl-true strong">add</span><span> </span><span class="hl hl-true">1 day and 4 seconds</span>
                <span>and</span> <span class="hl hl-false strong">subtract</span><span> </span><span class="hl hl-false">2 hours and 3 minutes</span>.
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>dp(2019y10M4d10h24m32s<span class="hl hl-true strong">a</span><span class="hl hl-true">1d4s</span><span class="hl hl-false strong">r</span><span class="hl hl-false">2h3m</span>)</code>

                <label class="output"></label>
                <code>2019y10M<span class="hl hl-true">5d</span><span class="hl hl-false">10h</span><span class="hl hl-true">21m</span><span class="hl hl-false">36s</span></code>

            </div>

            <p>
                The way the Kustom date &amp; time format works is it starts off with the current date &amp; time value and then overwrites/adds to/subtracts from specific components of that date &amp; time value.
            </p>

            <p>
                As an example of combining these mechanics, let's consider using <code>0h0m0sa1d</code> to get tomorrow's midnight:
                <code>1</code>. This results in the date &amp; time of tomorrow's midnight:
            </p>

            <ul>
                <li>
                    At the start,
                    <span class="hl hl-1">Year</span>,
                    <span class="hl hl-2">Month</span>,
                    <span class="hl hl-3">Day</span>,
                    <span class="hl hl-4">Hour</span>,
                    <span class="hl hl-5">Minute</span> and
                    <span class="hl hl-6">Second</span> are copied from the current date & time,
                </li>
                <li>
                    <code class="hl-4">0h</code>,
                    <code class="hl-5">0m</code>,
                    <code class="hl-6">0s</code> -
                    <span class="hl hl-4">Hours</span>,
                    <span class="hl hl-5">Minutes</span> and
                    <span class="hl hl-6">Seconds</span> are set to <code>0</code>,
                </li>
                <li>
                    <code class="hl-3">a1d</code> - Day is increased by <code>1</code>.
                </li>
            </ul>

            This results in:

            <ul>
                <li>
                    <span class="hl hl-1">Year</span>,
                    <span class="hl hl-2">Month</span> and
                    <span class="hl hl-3">Day</span>
                    specifying tomorrow as the date,
                </li>
                <li>
                    <span class="hl hl-4">Hours</span>,
                    <span class="hl hl-5">Minutes</span> and
                    <span class="hl hl-6">Seconds</span> specifying midnight (00:00:00) as the time.
                </li>
            </ul>

            <p>
                If you only use addition and/or subtraction, you'll get a datetime relative to the current date and time.
                For example, using just <code class="hl-true">a1d</code> or <code class="hl-false">r1d</code> will give you the same time as right
                now, but the date for <span class="hl hl-true">tomorrow</span> or <span class="hl hl-false">yesterday</span> respectively.
            </p>

            <p>
                Some functions ignore the time portion of the date & time arguments they are given.
                For example, <code>ci(title, 0, <span class="hl hl-21">a</span><span class="hl hl-11">1d</span>)</code> gets the title of the first calendar event for tomorrow.
                The time portion of the date resulting from <code>a1d</code> is ignored, and only the date portion is used to determine what day to get the first calendar event for.
            </p>


            <h3 id="timespan">Timespan</h3>

            <p>
                Timespan is a different value type than datetime. Where datetime represents a specific point in time, a timespan value
                represents a duration, down to a second.
            </p>

            <p>
                While it is useful to think of a date & time as having separate components for each portion, it's more useful to think of a timespan value as just a number of seconds.
            </p>

            <h4 id="obtaining-timespans">Obtaining timespans</h4>

            <p>
                Timespans can be obtained by subtracting one date & time from another.
                In this example, the two points in time are 1 day, 2 hours, 3 minutes and 4 seconds apart:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>dp(2022y11M4d10h24m32s) - dp(2022y11M3d8h21m28s)</code>
                <label class="output"></label>
                <code>93784</code>
            </div>

            <p>
                The resulting timespan is printed as the aforementioned number of seconds, as we can verify by manually calculating the number of seconds in
                <span class="hl hl-3 nowrap">1 day</span>, <span class="hl hl-4 nowrap">2 hours</span>, <span class="hl hl-5 nowrap">3 minutes</span> and <span class="hl hl-6 nowrap">4 seconds</span>:
            </p>

            <div class="snippet">
                <label class="ex-no subex"></label>
                <code>
                <span class="hl hl-3">1 * 24 * 60 * 60</span>
                <span>+</span>
                <span class="hl hl-4">2 * 60 * 60</span>
                <span>+</span>
                <span class="hl hl-5">3 * 60</span>
                <span>+</span>
                <span class="hl hl-6">4</span>
            </code>
                <label class="output"></label>
                <code>93784</code>
            </div>

            <p>
                If we were to swap the order of the two date & time values, the resulting timespan would be negative:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>dp(2022y11M3d8h21m28s) - dp(2022y11M4d10h24m32s)</code>
                <label class="output"></label>
                <code>-93784</code>
            </div>


            <h4 id="timespan-printing">Formatting timespans using <code>tf()</code></h4>

            <p>
                Timespans can be formatted using <code>tf()</code> (Timespan Format).
                There are two main ways to call <code>tf()</code>:
            </p>

            <ul>
                <li>
                    <code>tf(<span class="hl hl-1">timespan</span>)</code> - Formats the timespan using a default, human-readable format,
                </li>
                <li>
                    <code>tf(<span class="hl hl-1">timespan</span>, <span class="hl hl-2">format</span>)</code> - Prints the timespan using the given format.
                </li>
            </ul>

            <p>
                Furthermode, the <span class="hl hl-1">timespan</span> argument can be a timespan value, or a date & time value.
                If it is a date & time value, it is first converted to a timespan value by subtracting the current date & time from it.
            </p>

            <p>
                The default, human-readable format is different depending on whether the first argument was a timespan, or a date & time.
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tf(a1h)</code>
                <label class="output"></label>
                <code>60 minutes from now</code>
            </div>

            <p>
                For timespans, the output will describe the amount of time in the timespan, in the largest units possible.
                In this example, the timespan is 1 hour (60 minutes * 60 seconds):
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tf(60 * 60)</code>
                <label class="output"></label>
                <code>1 hour</code>
            </div>

            <p>
                For date & time values, the output will describe the given date & time relative to current date & time.
                In this example, the date & time being given is now + 1 hour:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tf(a1h)</code>
                <label class="output"></label>
                <code>60 minutes from now</code>
                <div class="note">
                    Note: At the time of writing, an (I believe) bug is present that causes the output for the date & time mode to be displayed one unit smaller than it should be -
                    in this case, I believe the output should be "1 hour from now". Interestingly, this is not the case for the timespan mode.
                </div>
            </div>

            <p>
                As mentioned before, you can pass a format string as the second argument for <code>tf()</code>.
                Similarly to <code>df()</code>, the format string can contain tokens that will be replaced with values.
                Here are all <code>tf()</code> format tokens I know of:
            </p>

            <div class="table-container">
                <table id="tf-token-table">
                    <thead>
                        <tr>
                            <th>Token</th>
                            <th>Meaning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>h</code></td>
                            <td>Hours</td>
                        </tr>
                        <tr>
                            <td><code>m</code></td>
                            <td>Minutes</td>
                        </tr>
                        <tr>
                            <td><code>s</code></td>
                            <td>Seconds</td>
                        </tr>
                        <tr>
                            <td><code>D</code></td>
                            <td>Total days</td>
                        </tr>
                        <tr>
                            <td><code>H</code></td>
                            <td>Total hours</td>
                        </tr>
                        <tr>
                            <td><code>M</code></td>
                            <td>Total minutes</td>
                        </tr>
                        <tr>
                            <td><code>S</code></td>
                            <td>Total seconds</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>
                Consider a timespan lasting 1 day, 2 hours, 3 minutes and 4 seconds.
            </p>

            <p>
                The values for Hours, Minutes and Seconds are right there - if you used <code>D:hh:mm:ss</code> as the format, you would get <code>1:02:03:04</code>.
            </p>

            <p>
                The total number for Days, Hours, Minutes and Seconds is the number of that component plus all previous components converted to the same unit.
            </p>

            <p>
                Consider minutes for example - the total number of minutes is the <span class="hl hl-1">number of minutes</span> +
                <span class="hl hl-2">number of hours converted to minutes</span> + <span class="hl hl-3">number of days converted to minutes</span>:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>
                <span class="hl hl-1">3</span> 
                <span>+</span>
                <span class="hl hl-2">2 * 60</span>
                <span>+</span>
                <span class="hl hl-3">1 * 24 * 60</span>
            </code>
                <label class="output"></label>
                <code>93784</code>
            </div>

            <p>
                Therefore, if you used <code>M</code> as the format, you would get <code>93784</code>.
            </p>

            <p>
                Because there is no previous component for Days, there is no <span class="nowrap">non-total</span> number of Days, thus the only token for Days is <code>D</code>.
            </p>

            <p>
                Negative timespans given as date & time values are formatted the same way as positive timespans, but with the word "ago" instead of "from now".
            </p>

            <p>
                Negative timespans given as timespan values are formatted exactly the same way as positive timespans - there is no sign in the output that the timespan is negative (this might be a bug).
            </p>

            <p>
                Negative timespans with a custom format print the same way as positive timespans, except the output of each token is prefixed with a minus:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tf(-93784, "D:hh:mm:ss")</code>
                <label class="output"></label>
                <code>-1:-2:-3:-4</code>
                <div class="note">
                    Note: <code>hh</code>, <code>mm</code> and <code>ss</code> still pad their respective components with zeroes to two characters,
                    but in this case the minus sign counts towards the 2 characters, leading to no zeroes being added.
                </div>
            </div>

            <p>
                Just like with <code>df()</code> format string, singlequotes can be used to include literal text:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tf(a2h36m, "<span class="hl hl-1">H</span> 
                <span class="hl hl-gray strong">'</span><span class="hl hl-gray">hours and</span><span class="hl hl-gray strong">'</span>
                <span class="hl hl-2">m</span> 
                <span class="hl hl-gray strong">'</span><span class="hl hl-gray">minutes</span><span class="hl hl-gray strong">'</span>")
            </code>

                <label class="output"></label>
                <code><span class="hl hl-1">2</span> <span class="hl hl-gray">hours and</span> <span class="hl hl-2">36</span> <span class="hl hl-gray">minutes</span></code>

            </div>


            <h2 id="further-reading">Further reading</h2>

            <p>
                If you want to learn more about Kustom:
            </p>

            <ul class="text-left">
                <li>
                    <a href="https://help.kustom.rocks/s1-general/knowledgebase/top/c2-functions">Official documentation</a> for all Kustom functions,
                </li>
                <li>
                    <a href="https://discord.gg/XhDkh3SFNt">Kustom Discord server</a>, where you can get help and showcase your creations, as well as browse useful resources and formulas created by other users,
                </li>
                <li>
                    <a href="https://reddit.com/r/kustom">Kustom Subreddit</a>,
                </li>
                <li>
                    <a href="https://www.jagwar.de/kustom-live-wallpaper-maker/">Jagwar's Kustom Basics</a> - tutorial series,
                </li>
                <li>
                    <a href="https://www.bcraftmath.com/klwp.html">Brandon Craft's series of tutorials</a> on Kustom apps.
                </li>
            </ul>


            <h2 id="tips-and-tricks">Additional tips &amp; tricks</h2>

            <h3 id="more-about-parentheses">More about parentheses &amp; quotation marks</h3>

            <p>
                Be careful when using parentheses and doublequotes - both will give you errors when mismatched. You need a
                closing parenthesis for every opening one, and a closing quotation mark for each opening one.
            </p>

            <div class="snippet">

                <label class="ex-no subex first">
                    <span class="error">incorrect - the red parenthesis doesn't have an opening one</span>
                </label>
                <code><span class="hl hl-1">(</span>10 + tc<span class="hl hl-2">(</span>len, mi<span class="hl hl-3">(</span>title<span class="hl hl-3">)</span> + "a"<span class="hl hl-2">)</span><span class="hl hl-1">)</span><span class="hl hl-error">)</span> * 3</code>

                <label class="ex-no subex">
                    <span class="success">correct</span>
                </label>
                <code><span class="hl hl-1">(</span>10 + tc<span class="hl hl-2">(</span>len, mi<span class="hl hl-3">(</span>title<span class="hl hl-3">)</span> + "a"<span class="hl hl-2">)</span><span class="hl hl-1">)</span> * 3</code>

            </div>

            <p>
                Because of that, if you try to put a quotation mark in your string, it'll get treated as a closing quotation
                mark, which'll break your formula.
            </p>

            <div class="snippet">
                <label class="ex-no">
                    <span class="error">incorrect - matching doublequotes highlighted</span>
                </label>
                <code><span class="hl hl-1 strong">"</span><span class="hl hl-1">He said </span><span class="hl hl-1 strong">"</span>I am dead<span class="hl hl-2 strong">"</span><span class="hl hl-2">. He was right.</span><span class="hl hl-2 strong">"</span></code>
            </div>

            <p>
                To get around it, you can use <code>tc(utf)</code>.
                <code>tc(utf, [character code])</code> returns a character from its hexadecimal representation.
                A doublequote's "hex code" is <code>22</code>, so <code>tc(utf, 22)</code> will return a doublequote character.
                Then, use <code>+</code> to concatenate parts of the string and the doublequotes returned from
                <code>tc(utf)</code>:
            </p>

            <div class="snippet">

                <label class="ex-no">
                    <span class="success">correct - matching doublequotes highlighted</span>
                </label>
                <code>
                <span class="hl hl-1 strong">"</span><span class="hl hl-1">He said </span><span class="hl hl-1 strong">"</span> + <span class="hl hl-2">tc(utf, 22)</span>
                <span>+</span>
                <span class="hl hl-3 strong">"</span><span class="hl hl-3">I am dead</span><span class="hl hl-3 strong">"</span> + <span class="hl hl-2">tc(utf, 22)</span> + <span class="hl hl-4 strong">"</span><span class="hl hl-4">. He was right.</span><span class="hl hl-4 strong">"</span>
            </code>

                <label class="output"></label>
                <code><span class="hl hl-1">He said </span><span class="hl hl-2">"</span><span class="hl hl-3">I am dead</span><span class="hl hl-2">"</span><span class="hl hl-4">. He was right.</span></code>

            </div>

            <p>
                Alternatively, single quotes could be used in the string and later replaced with double quotes using
                <code>tc(reg)</code>:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tc(reg, "He said <span class="hl hl-1">'</span><span>I am dead</span><span class="hl hl-1">'</span><span>. He was right.", </span><span class="hl hl-1">'</span><span>, </span><span class="hl hl-2">tc(utf, 22)</span>)</code>

                <label class="output"></label>
                <code>He said <span class="hl hl-2">"</span><span>I am dead<span class="hl hl-2">"</span>. He was right.</code>

            </div>


            <h3 id="concatenating-numbers">Concatenating numbers</h3>

            <p>
                I mentioned before that I'll present a workaround for concatenating numbers instead of adding them together.
                It looks like this:
            </p>

            <div class="snippet">
                <label class="ex-no"></label>
                <code>tc(reg, [number 1], "$", [number 2])</code>
            </div>

            <p>
                This matches the end of the first number and replaces it with the second number.
                Note that this will still not help you with numeric values written directly:
            </p>

            <div class="snippet">

                <label class="ex-no"></label>
                <code>tc(reg, 003, "$", 009)</code>

                <label class="output"></label>
                <code>39</code>

            </div>

            <p>
                But, if the number is received from another function and is a text value behind the scenes, it helps avoid the aggressive conversion to number <code>+</code> performs:
            </p>

            <div class="snippet">

                <label class="ex-no subex first"></label>
                <code>tc(lpad, 3, 3, 0) + 9</code>

                <label class="output"></label>
                <code>11</code>

            </div>

            <div class="snippet">

                <label class="ex-no subex"></label>
                <code>tc(reg, tc(lpad, 3, 3, 0), "$", 9)</code>

                <label class="output"></label>
                <code>0039</code>

            </div>

            <footer>

                <p>
                    This is the end of the guide.
                </p>

                <p>
                    If you made it this far, thank you very much for reading! Hope you found this resource useful.
                    If you have some feedback, be it positive or negative, contact me on the <a href="https://discord.gg/XhDkh3SFNt">Kustom Discord server</a>.
                </p>

                <p>
                    Shoutouts to Bunn-E, Grabster and robin for helping me give this guide a much-needed facelift in November 2022.
                </p>

                <p class="text-right">
                    have a nice day o7<br>
                    - Tored
                </p>

            </footer>

    </main>

    <script src="js/index.js?v=0.1.7"></script>

</body>

</html>